<p id="notice"><%= notice %></p>

<h1>Image Posts</h1>
<hr>

    <% @image_posts.each do |image_post| %>
    <div class="image_posts">
      <br>Posted <%= time_ago_in_words(image_post.created_at || Time.now) %> ago by <%= find_post_email(image_post) %>.</p>

      <%= image_tag image_post.picture_url, width: '50%' if image_post.picture.present? %><br>
            <%= image_post.caption %><br>
        <div class="likes">
          <% like_checker = image_post.image_likes.find { |like| like.user_id == current_user.id } %>
          <% if like_checker %>
            <%= button_to 'Unlike', image_post_image_like_path(image_post[:id], like_checker), method: :delete %>
          <% else %>
            <%= button_to 'Like', image_post_image_likes_path(image_post[:id]), :id => 'submit-like' , method: :post %>
          <% end %>
          <p><%= image_post.image_likes.count %> <%= image_post.image_likes.count == 1 ? 'Like' : 'Likes' %></p>
        </div>
        <hr>
      </div>
    <% end %>
