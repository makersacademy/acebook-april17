<%= render 'layouts/navbar' %>


<h1>Post</h1>
  <%= simple_format(@post.message) %>
  <% user = User.find_by(id: @post.user_id) %>
  <p> <%= user.first_name %> <%= user.last_name %>: <%= @post.time_stamp %></p>

  <h2>Add your comment:</h2>
    <%= form_with(model: [ @post, @post.comments.build ], local: true) do |form| %>
    <p>
      <%= form.text_area :body %>
    </p>
    <p>
      <%= form.submit %>
    </p>
  <% end %>

  <h2>Comments</h2>
    <div>
      <% @post.comments.select(&:persisted?).each do |comment| %>
        <div>
          <p> <%= comment.body %> </p>    
          <% commenter = User.find_by(id: comment.user_id) %>
          <p> Commented by: <%= commenter.first_name %> <%= commenter.last_name %> at <%= comment.created_at  %></p>
        </div>
      <% end %>
    </div>

<%= link_to 'Back', posts_path %>
